# US-012 : Redirect From Backend To Frontend Dashboard
Okay, here's a step-by-step guide to redirecting the Laravel backend URL to the frontend URL, including troubleshooting steps:

**Goal:** Redirect the root URL of the Laravel backend (e.g., `https://photosync-backend-337170911550.us-central1.run.app/`) to the Vue.js frontend URL (e.g., `https://photosync-sigma.vercel.app/`).

**Prerequisites:**

*   A Laravel project deployed to Google Cloud Run.
*   The Google Cloud SDK (gcloud) installed and configured.
*   Basic familiarity with Laravel routing.

**Steps:**

1.  **Access the Cloud Shell:**

    *   Open the Google Cloud Console.
    *   Activate Cloud Shell by clicking the "Activate Cloud Shell" button in the top right corner.

2.  **Navigate to the Laravel Project Directory:**

    *   Use the `cd` command to navigate to your Laravel project directory within the Cloud Shell. Assuming your project is in `/home/etters_ayoub/photosync`, run:

    ```bash
    cd /home/etters_ayoub/photosync
    ```

3.  **Examine the Current Routes (Optional):**

    *   To see the current route configuration, use the `php artisan route:list` command. This is helpful for understanding how your application handles requests.

    ```bash
    php artisan route:list
    ```

4.  **Modify the Route to Redirect:**

    *   Edit the `routes/web.php` file to define a route that redirects the root URL (`/`) to your frontend URL. You can use the `edit_existing_file` tool.

    *   Replace the existing content of `routes/web.php` with the following code:

    ```php
    <?php

    use Illuminate\Support\Facades\Route;

    Route::get('/', function () {
        return redirect('https://photosync-sigma.vercel.app/');
    });
    ```
5.  **Clear the Route Cache (Important):**

    *   Laravel often caches routes for performance. After modifying `routes/web.php`, clear the route cache to ensure your changes take effect.

    ```bash
    php artisan route:clear
    ```

6.  **Test Locally (Recommended but may require setup):**

    *   To test the redirect locally, you'd ideally run the Laravel development server. However, you might encounter issues if you don't have the necessary PHP extensions (like `pgsql` for PostgreSQL) installed in your Cloud Shell environment. If you encounter issues, skip to step 7 and test the deployment directly.
    *   To start the Laravel development server (if you have the dependencies), run:

    ```bash
    php artisan serve --host=0.0.0.0 --port=8080 &
    ```
7.  **Deploy the Changes to Google Cloud Run:**

    *   Trigger a new deployment of your Laravel application to Google Cloud Run. This will build a new container image and update your service.
       First build the image
        ```bash
        ./scripts/deploy/2-build.sh
        ```

        Then deploy
        ```bash
        ./scripts/deploy/3-deploy.sh
        ```

    *   Alternatively use gcloud command to deploy

    ```bash
    gcloud run deploy photosync-backend --source . --region us-central1 --allow-unauthenticated
    ```

8.  **Verify the Deployment:**

    *   After the deployment completes, check the service URL provided in the Cloud Run console or the output of the `gcloud run deploy` command.
    *   Access the backend URL (e.g., `https://photosync-backend-337170911550.us-central1.run.app/`) in your web browser.
    *   You should be automatically redirected to your frontend URL (e.g., `https://photosync-sigma.vercel.app/`).

**Troubleshooting:**

*   **Route Cache:** Always clear the route cache after modifying `routes/web.php`.
*   **Deployment Issues:** Double-check that the deployment process completes successfully and that the new container image is deployed. Look for any errors in the Cloud Build logs.
*   **Browser Caching:** Clear your browser's cache to ensure you're not seeing an old version of the site.
*   **.env Configuration:** Verify that your `.env` file doesn't contain any settings that might interfere with the redirect.

By following these steps, you should be able to successfully redirect your Laravel backend URL to the Vue.js frontend.
