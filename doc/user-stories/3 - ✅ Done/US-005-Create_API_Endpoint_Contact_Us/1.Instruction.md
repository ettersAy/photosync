# âœ… US-005: Create API Endpoint for Contact Messages

**Task:** Implement the backend API endpoint that receives contact form submissions and stores them in the `messages` table.

You have access to the Laravel 12 application.
Implement the "Contact Us" message save API using the following requirements:

### **1. Create Controller**

Create a controller at:

```
app/Http/Controllers/Api/MessageController.php
```

with these methods:

* `store(Request $request)` â†’ validates input and inserts into `messages` table
* `index()` â†’ returns all messages (for later admin use)

Validation rules:

* `email` â†’ nullable, email
* `msg` â†’ required, string, max:5000 chars

On success, return:

```json
{
  "ok": true,
  "id": <stored_message_id>
}
```

HTTP status: **201**

---

### **2. Add Routes**

In `routes/api.php`, register:

```php
Route::post('/messages', [MessageController::class, 'store']);
Route::get('/messages', [MessageController::class, 'index']);
```

---

### **3. Ensure CORS Allows Frontend**

Update `config/cors.php`:

* Allow POST requests
* Allow Vercel origin (`https://*.vercel.app`)
* Allow local dev (`http://localhost:5173`)

---

### **4. No Authentication Required Yet**

Both routes must be public.
Later phases will add admin auth, but **not now**.

---

### **5. Output**

When finished, ensure:

* Controller file exists and passes `php artisan lint`
* Routes are registered
* Endpoint successfully accepts JSON payloads:

Example request:

```json
{
  "email": "test@example.com",
  "msg": "Hello world!"
}
```

---

ðŸ”š **User Story status:** Ready
